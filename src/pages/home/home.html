<!--
  Generated template for the HomePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar color="white">
    <ion-title>TV猫</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div class="heading" *ngIf="homeData.agent">
    <ion-item>
      <ion-avatar item-left>
        <img src="assets/imgs/default_avatar.png" />
      </ion-avatar>
      <h2 class="name">{{homeData.agent.name}}
        <span class="level">{{homeData.agent.level_name}}</span></h2>
      <p class="info">
        <span>账号: {{homeData.agent.login}}</span><br>
        <span>ID: {{homeData.agent.id}}</span>
      </p>
      <ion-note item-right>
        <button ion-button small>发展代理</button>
        <p>下级分销商: 300</p>
      </ion-note>
    </ion-item>
    <ion-row>
      <ion-col col-3>
        <div class="stat-box">
          <h2>¥ {{homeData.agent.earn}}</h2>
          <p>总收入</p>
        </div>
      </ion-col>
      <ion-col col-3>
          <div class="stat-box">
            <h2>¥ {{homeData.agent.today_earn}}</h2>
            <p>今日收入</p>
          </div>
        </ion-col>
        <ion-col col-3>
            <div class="stat-box">
              <h2>{{homeData.agent.total_orders}}</h2>
              <p>总订单</p>
            </div>
          </ion-col>
          <ion-col col-3>
              <div class="stat-box">
                <h2>{{homeData.agent.today_orders}}</h2>
                <p>今日订单</p>
              </div>
            </ion-col>
    </ion-row>
  </div>
  <div class="box">
    <h2 class="title">TV猫下载方式<span class="ios-install">苹果安装教程</span></h2>
    <div class="error-empty-box" *ngIf="!homeData.app_info">
      无下载信息
    </div>
    <div class="qrcode" *ngIf="homeData.app_info">
        <img src="assets/imgs/qrcode.jpg" />
        <p>识别二维码下载</p>
      </div>
  </div>
  <div class="box">
    <h2 class="title">最新订单</h2>
    <div class="error-empty-box" *ngIf="homeData.orders.length === 0">
      暂无订单
    </div>
    <div class="order" *ngFor="let order of homeData.orders">
      <ion-row>
        <ion-col col-6>
          <p>{{order.vip_plan.name}}</p>
          <p>分销商: {{order.agent_name}}</p>
          <p>{{order.time}}</p>
        </ion-col>
        <ion-col col-6 style="text-align:right;">
          <p>{{order.vip_plan.price == 0 ? '免费' : order.vip_plan.price + '元/个'}}</p>
          <p>× {{order.quantity}}</p>
          <p *ngFor="let earn of order.agent_earns">{{earn.title}}：{{earn.money}}元</p>
        </ion-col>
      </ion-row>
    </div>
  </div>
</ion-content>
